# Don't wait for job termination notification
# set -o notify

# Don't use ^D to exit
# set -o ignoreeof

# Use case-insensitive filename globbing
shopt -s nocaseglob

# Use hidden file globbing
shopt -s cmdhist

# Make bash append rather than overwrite the history on disk
shopt -s histappend

# When changing directory small typos can be ignored by bash
# for example, cd /vr/lgo/apaache would find /var/log/apache
shopt -s cdspell

# check the window size after each command and, if necessary,
# update the values of LINES and COLUMNS.
shopt -s checkwinsize

# save multi-line commands as one history entry
shopt -s cmdhist

# make less more friendly for non-text input files, see lesspipe(1)
[ -x /usr/bin/lesspipe ] && eval "$(SHELL=/bin/sh lesspipe)"

# set up prompt
function prompt_command() {
	exitCode=$?
		
	# display git branch in prompt
	if [ "\$(type -t __git_ps1)" ]; then # if we're in a Git repo, show current branch
		BRANCH="\$(__git_ps1 '[%s] ')"
	else
		BRANCH=""
	fi

	local TIME="\A"
	local PATH="\w"
	local RESET='\[\e[0m\]'
	local WHITE='\[\e[1;37m\]'
	local GREEN='\[\e[1;32m\]'
	local CYAN='\[\e[1;36m\]'
	local RED='\[\e[1;31m\]'

	# red color for  root
	if [ $UID -eq 0 ]; then
		USER_HOST="${RED}\u@\h"
	else
		USER_HOST="${GREEN}\u@\h"
	fi

	# red exit code and dollar prompt if non-zero
	if [ $exitCode -ne 0 ]; then
		EXIT_CODE="${RED}($exitCode) ${RESET}"
		DOLLAR="${RED}\$ ${RESET}"
	else
		EXIT_CODE=""
		DOLLAR="\$ "
	fi
	export PS1="${RESET}${WHITE}${TIME} ${USER_HOST} ${EXIT_CODE}${CYAN}${PATH}\n${RESET}${BRANCH}${DOLLAR}"
}

# Whenever displaying the prompt, write the previous line to disk (-a) and read
# the new line into the history list (-n)
export PROMPT_COMMAND="prompt_command; history -a; history -n; ${PROMPT_COMMAND}"

